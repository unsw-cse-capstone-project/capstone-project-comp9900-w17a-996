{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nrequire('./styles.css');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar PmRibbon = function (_React$Component) {\n  _inherits(PmRibbon, _React$Component);\n\n  function PmRibbon(props) {\n    _classCallCheck(this, PmRibbon);\n\n    var _this = _possibleConstructorReturn(this, (PmRibbon.__proto__ || Object.getPrototypeOf(PmRibbon)).call(this, props));\n\n    _this.init = function () {\n      _this.ctx.clearRect(0, 0, _this.width, _this.height);\n\n      _this.path = [{\n        x: 0,\n        y: _this.drawSite[0]\n      }, {\n        x: 0,\n        y: _this.drawSite[1]\n      }]; // 直至x方向绘制完成\n\n      while (_this.path[1].x < _this.width + _this.ribbonWidth) {\n        _this.draw(_this.path[0], _this.path[1]);\n      }\n    };\n\n    _this.draw = function (start, end) {\n      var ctx = _this.ctx; // 获取实例\n\n      ctx.beginPath(); // 开始路径\n\n      ctx.moveTo(start.x, start.y); // 绘制第一点\n\n      ctx.lineTo(end.x, end.y); // 绘制第二点\n\n      var nextX = end.x + (_this.random() * 2 - 0.25) * _this.ribbonWidth; // 随机生成第三点的x坐标\n\n\n      var nextY = _this.geneY(end.y); // 随机生成第三点的y坐标\n\n\n      ctx.lineTo(nextX, nextY); // 绘制第三点\n\n      ctx.closePath(); // 闭合本次路径\n\n      ctx.fillStyle = _this.geneStyle(); // 得到随机绘制颜色\n\n      ctx.fill(); // 着色\n\n      _this.r -= _this.PI_2 / -50; // 调整下次的随机颜色\n\n      _this.path[0] = _this.path[1]; // 重新定义第一开始点\n\n      _this.path[1] = {\n        x: nextX,\n        y: nextY // 重新定义第二开始点\n\n      };\n    };\n\n    _this.geneStyle = function () {\n      var cos = _this.cos;\n      var bgStyle = [];\n      bgStyle[0] = parseInt(cos(_this.r) * 127 + 128).toString(16);\n      bgStyle[1] = parseInt(cos(_this.r + _this.PI_2 / 3) * 127 + 128).toString(16);\n      bgStyle[2] = parseInt(cos(_this.r + _this.PI_2 / 3 * 2) * 127 + 128).toString(16);\n      bgStyle[0] = bgStyle[0].length === 1 ? '0' + bgStyle[0] : bgStyle[0];\n      bgStyle[1] = bgStyle[1].length === 1 ? '0' + bgStyle[1] : bgStyle[1];\n      bgStyle[2] = bgStyle[2].length === 1 ? '0' + bgStyle[2] : bgStyle[2];\n      return '#' + bgStyle.join('');\n    };\n\n    _this.geneY = function (y) {\n      var temp = y + (_this.random() * 2 - 1.1) * _this.ribbonWidth; // 如果第三点在视图外重新获取\n\n\n      return temp > _this.height || temp < 0 ? _this.geneY(y) : temp;\n    };\n\n    _this.state = {};\n    _this.ctx = null;\n    _this.ribbonWidth = _this.props.ribbonWidth || 100; // 彩带宽度\n\n    _this.globalAlpha = _this.props.globalAlpha || 0.5; // 彩带透明度 \n\n    _this.zIndex = _this.props.zIndex || 0; // canvas层级\n\n    _this.canClickChange = _this.props.canClickChange || false; // 点击canvas能否变化\n\n    _this.clickChangeDom = _this.props.clickChangeDom || null; // 点击其他部位变化\n\n    _this.r = 0; // 用于控制水随机色\n\n    _this.PI_2 = Math.PI * 2; // 圆周率\n\n    _this.cos = Math.cos; // cos函数\n\n    _this.random = Math.random; // 随机函数\n\n    return _this;\n  }\n\n  _createClass(PmRibbon, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      var canvasRibbon = this.refs.ribbonCanvas; // 获取canvasDom\n\n      var ctx = canvasRibbon.getContext('2d'); // 获取canvas2d实例\n\n      this.ctx = ctx; // 保存canvas\n\n      this.width = canvasRibbon.offsetWidth; // 当前canvas容器的高\n\n      this.height = canvasRibbon.offsetHeight; // 当前canvas容器的宽\n      // 绘制初始位置, 默认中间浮动半个宽度\n\n      this.drawSite = this.props.drawSite || [this.height * 0.5 + this.ribbonWidth, this.height * 0.5 - this.ribbonWidth];\n      var dpr = window.devicePixelRatio || 1; // 设备的物理像素分辨率与CSS像素分辨率的比率\n\n      canvasRibbon.width = this.width * dpr; // 实际canvas绘图的宽\n\n      canvasRibbon.height = this.height * dpr; // 实际canvas绘图的宽\n\n      ctx.scale(dpr, dpr); // 实际canvas缩放比\n\n      ctx.globalAlpha = this.globalAlpha; // 设置彩带透明度\n\n      this.init(); // 初始化彩带生成函数\n\n      this.clickChangeDom && this.clickChangeDom.addEventListener('click', this.init); // 监听click事件\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      this.clickChangeDom && this.clickChangeDom.removeEventListener('click', this.init); // 取消监听click事件\n    }\n    /** \r\n     * 初始化彩带函数\r\n    */\n\n    /** \r\n     * 绘制彩带\r\n    */\n\n    /** \r\n     * 随机生成并设置canvas路径16进制颜色\r\n    */\n\n    /**\r\n     * 随机生成第三点的位置\r\n     */\n\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this2 = this;\n\n      var style = {\n        zIndex: this.zIndex\n      };\n      return _react2.default.createElement('canvas', {\n        ref: 'ribbonCanvas',\n        className: 'pm-ribbon',\n        onClick: function onClick() {\n          _this2.canClickChange && _this2.init();\n        },\n        style: _extends({}, style)\n      });\n    }\n  }]);\n\n  return PmRibbon;\n}(_react2.default.Component);\n\nexports.default = PmRibbon;","map":{"version":3,"sources":["/Users/jiaqima/Desktop/9900/capstone-project-comp9900-w17a-996/filmfinder/node_modules/pm-ribbon/dist/index.js"],"names":["Object","defineProperty","exports","value","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","Constructor","protoProps","staticProps","_react","require","_react2","_interopRequireDefault","obj","__esModule","default","_classCallCheck","instance","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","PmRibbon","_React$Component","_this","getPrototypeOf","init","ctx","clearRect","width","height","path","x","y","drawSite","ribbonWidth","draw","start","end","beginPath","moveTo","lineTo","nextX","random","nextY","geneY","closePath","fillStyle","geneStyle","fill","r","PI_2","cos","bgStyle","parseInt","toString","join","temp","state","globalAlpha","zIndex","canClickChange","clickChangeDom","Math","PI","componentDidMount","canvasRibbon","refs","ribbonCanvas","getContext","offsetWidth","offsetHeight","dpr","window","devicePixelRatio","scale","addEventListener","componentWillUnmount","removeEventListener","render","_this2","style","createElement","ref","className","onClick","Component"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nrequire('./styles.css');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar PmRibbon = function (_React$Component) {\n    _inherits(PmRibbon, _React$Component);\n\n    function PmRibbon(props) {\n        _classCallCheck(this, PmRibbon);\n\n        var _this = _possibleConstructorReturn(this, (PmRibbon.__proto__ || Object.getPrototypeOf(PmRibbon)).call(this, props));\n\n        _this.init = function () {\n            _this.ctx.clearRect(0, 0, _this.width, _this.height);\n            _this.path = [{ x: 0, y: _this.drawSite[0] }, { x: 0, y: _this.drawSite[1] }];\n            // 直至x方向绘制完成\n            while (_this.path[1].x < _this.width + _this.ribbonWidth) {\n                _this.draw(_this.path[0], _this.path[1]);\n            }\n        };\n\n        _this.draw = function (start, end) {\n            var ctx = _this.ctx; // 获取实例\n            ctx.beginPath(); // 开始路径\n            ctx.moveTo(start.x, start.y); // 绘制第一点\n            ctx.lineTo(end.x, end.y); // 绘制第二点\n            var nextX = end.x + (_this.random() * 2 - 0.25) * _this.ribbonWidth; // 随机生成第三点的x坐标\n            var nextY = _this.geneY(end.y); // 随机生成第三点的y坐标\n            ctx.lineTo(nextX, nextY); // 绘制第三点\n            ctx.closePath(); // 闭合本次路径\n            ctx.fillStyle = _this.geneStyle(); // 得到随机绘制颜色\n            ctx.fill(); // 着色\n            _this.r -= _this.PI_2 / -50; // 调整下次的随机颜色\n            _this.path[0] = _this.path[1]; // 重新定义第一开始点\n            _this.path[1] = { x: nextX, y: nextY // 重新定义第二开始点\n            };\n        };\n\n        _this.geneStyle = function () {\n            var cos = _this.cos;\n            var bgStyle = [];\n            bgStyle[0] = parseInt(cos(_this.r) * 127 + 128).toString(16);\n            bgStyle[1] = parseInt(cos(_this.r + _this.PI_2 / 3) * 127 + 128).toString(16);\n            bgStyle[2] = parseInt(cos(_this.r + _this.PI_2 / 3 * 2) * 127 + 128).toString(16);\n            bgStyle[0] = bgStyle[0].length === 1 ? '0' + bgStyle[0] : bgStyle[0];\n            bgStyle[1] = bgStyle[1].length === 1 ? '0' + bgStyle[1] : bgStyle[1];\n            bgStyle[2] = bgStyle[2].length === 1 ? '0' + bgStyle[2] : bgStyle[2];\n            return '#' + bgStyle.join('');\n        };\n\n        _this.geneY = function (y) {\n            var temp = y + (_this.random() * 2 - 1.1) * _this.ribbonWidth;\n            // 如果第三点在视图外重新获取\n            return temp > _this.height || temp < 0 ? _this.geneY(y) : temp;\n        };\n\n        _this.state = {};\n        _this.ctx = null;\n        _this.ribbonWidth = _this.props.ribbonWidth || 100; // 彩带宽度\n        _this.globalAlpha = _this.props.globalAlpha || 0.5; // 彩带透明度 \n        _this.zIndex = _this.props.zIndex || 0; // canvas层级\n        _this.canClickChange = _this.props.canClickChange || false; // 点击canvas能否变化\n        _this.clickChangeDom = _this.props.clickChangeDom || null; // 点击其他部位变化\n        _this.r = 0; // 用于控制水随机色\n        _this.PI_2 = Math.PI * 2; // 圆周率\n        _this.cos = Math.cos; // cos函数\n        _this.random = Math.random; // 随机函数\n        return _this;\n    }\n\n    _createClass(PmRibbon, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            var canvasRibbon = this.refs.ribbonCanvas; // 获取canvasDom\n            var ctx = canvasRibbon.getContext('2d'); // 获取canvas2d实例\n            this.ctx = ctx; // 保存canvas\n            this.width = canvasRibbon.offsetWidth; // 当前canvas容器的高\n            this.height = canvasRibbon.offsetHeight; // 当前canvas容器的宽\n            // 绘制初始位置, 默认中间浮动半个宽度\n            this.drawSite = this.props.drawSite || [this.height * 0.5 + this.ribbonWidth, this.height * 0.5 - this.ribbonWidth];\n            var dpr = window.devicePixelRatio || 1; // 设备的物理像素分辨率与CSS像素分辨率的比率\n            canvasRibbon.width = this.width * dpr; // 实际canvas绘图的宽\n            canvasRibbon.height = this.height * dpr; // 实际canvas绘图的宽\n            ctx.scale(dpr, dpr); // 实际canvas缩放比\n            ctx.globalAlpha = this.globalAlpha; // 设置彩带透明度\n            this.init(); // 初始化彩带生成函数\n            this.clickChangeDom && this.clickChangeDom.addEventListener('click', this.init); // 监听click事件\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            this.clickChangeDom && this.clickChangeDom.removeEventListener('click', this.init); // 取消监听click事件\n        }\n\n        /** \r\n         * 初始化彩带函数\r\n        */\n\n\n        /** \r\n         * 绘制彩带\r\n        */\n\n\n        /** \r\n         * 随机生成并设置canvas路径16进制颜色\r\n        */\n\n\n        /**\r\n         * 随机生成第三点的位置\r\n         */\n\n    }, {\n        key: 'render',\n        value: function render() {\n            var _this2 = this;\n\n            var style = {\n                zIndex: this.zIndex\n            };\n            return _react2.default.createElement('canvas', { ref: 'ribbonCanvas', className: 'pm-ribbon', onClick: function onClick() {\n                    _this2.canClickChange && _this2.init();\n                },\n                style: _extends({}, style) });\n        }\n    }]);\n\n    return PmRibbon;\n}(_react2.default.Component);\n\nexports.default = PmRibbon;"]},"metadata":{},"sourceType":"script"}